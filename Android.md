Работа над операционной системой Android началась в 2003 году. Изначально система задумывалась как полностью независимая от аппаратной части устройств.

На тот момент [[Java]] уже прошёл проверку временем и как нельзя лучше подходил на роль среды для выполнения приложений.

**В 2005 году Google купила Android, и спустя три года вышла первая версия ОС.** Тогда же появился и магазин приложений, которые разрабатывались на [[Java]] специалистами по всему миру.

**Первая JVM на Android называлась Dalvik.** Она занималась выполнением приложений вплоть до версии операционной системы 4.4, её можно помнить под кодовым названием KitKat. Если вам удалось застать те времена, то вы наверняка помните, что до четвёртой версии устройства на Android никогда не отличалась быстродействием, и смартфоны от Apple всегда стояли на голову выше. Во многом это было связано с недостаточно оптимизированной JVM.

При одинаковой аппаратной мощности смартфонов операционная система iOS и приложения в ней, особенно когда дело касается обработки изображений или видео, работают быстрее и нередко выбираются пользователями за эту ощутимую отзывчивость.

Одна из основных причин этого заключается в том, что Apple создали единую экосистему, которая исключает необходимость быть гибким и подстраиваться под разные процессоры.

Когда iOS-разработчик создаёт приложение для айфона, то он точно знает, какой процессор будет установлен на устройстве. А это означает, что нет необходимости в каких-либо посредниках — приложение сразу можно скомпилировать в машинный код, понятный процессору, и установить его на устройстве. Запущенное на смартфоне приложение выполняется процессором напрямую. В то время как на Android BYTE-код приложения сперва интерпретируется виртуальной машиной.

Технический прогресс не даёт о себе забыть. С современными высокопроизводительными процессорами и быстрой оперативной памятью какие-то серьёзные просадки в быстродействии заметны всё реже.

Пока в основе всего находится [[Java]], от посредников, интерпретирующих код приложения, избавиться не получится.

Однако в [[Java]] есть секретное оружие, которое позволяет в большинстве случаев добиться производительности, равной по скорости производительности без интерпретатора. **Оно называется JIT (Just-In-Time) компиляция**.

**Принцип работы JIT** заключается в том, что если в процессе работы программы выясняется, что какие-то части кода выполняются несколько раз, либо его интерпретация занимает много времени, то такой код сохраняется в скомпилированном виде, чтобы при последующем обращении к нему не было необходимости в его повторной интерпретации.

Это очень сложная и многослойная система, которая работает автоматически.

Можно заметить, что в последние годы разница в быстродействии флагманских Android-смартфонов и iPhone существенно сократилась. И более того, в некоторых операциях Android даже выигрывает. Благодаря быстрой и качественной программной обработке портретная фотосъёмка на Android-устройствах уже давно стала заметно лучше, чем на iPhone.

И это во многом благодаря JIT.

Версия Android 4.4 была одной из самых знаковых для Google и не только потому, что это была последняя версия, в которой использовался Dalvik. Эта версия, несмотря на странный дизайн системы, запомнилась пользователям стабильнее и быстрее предыдущих. И причиной тому стали два вида виртуальных машин: старая JVM Dalvik и новая — ART.

**ART (Android Runtime) — новая виртуальная машина**, которая оптимизирована на работу JIT с мобильными приложениями. Эта JVM используется в Android по сей день и продолжает оптимизироваться с каждой новой версией операционной системы.

А ведь [[Java]] не так уж и плоха! И сегодня вся инфраструктура быстро работает на устройствах под управлением Android.

Для Android написаны миллионы приложений, которыми пользуются миллиарды людей, а специфика [[Java]] не позволит перевести их в какую-то другую экосистему так, чтобы это было оправданно с точки зрения быстродействия.

Компания Google, кстати, долгое время существовала под угрозой того, что она потеряет право на использование Android.

В 2010 году компания Sun Microsystems была поглощена крупнейшей корпорацией Oracle, к которой, помимо прочего, перешли все права на [[Java]]. И практически сразу же после сделки Oracle подали судебный иск к Google за то, что в коде инструментов для взаимодействия с операционной системой Android использовалось некоторое количество исходного кода [[Java]].

На протяжении 11 лет судебных разбирательств Google всерьёз работала над поиском и созданием альтернативной операционной системы, которая помогла бы обойтись без [[Java]].

Весной 2021 года суд посчитал, что количество позаимствованного кода по отношению к собственному коду Google ничтожно мало (менее 0,1%), что не может расцениваться как незаконное использование. И дело закрылось не в пользу Oracle.

Языки программирования довольно непросто постоянно развивать. Каждая новая версия языка должна поддерживать все существующие программы, которые были на нём написаны. Это создаёт серьёзные ограничения для развития.

В Android эта проблема ощущалась остро. Несмотря на тесную связь Java и Android, новые возможности Java были доступны не сразу. Прежде чем новые возможности Java станут доступны, они должны быть добавлены в Android SDK.

Google прилагала все усилия, чтобы разработчики могли использовать последние возможности Java при создании приложений, но из года в год компания упиралась в ограничения, связанные с поддержкой старых версий приложений и операционной системы. Так, поддержка Java 8 в Android появилась лишь спустя три года после её выхода, в версии Android 8.0 (Oreo). А использование Java 11, вышедшей в 2018 году, стало доступно лишь в 2021.

Появление нового языка для Android было лишь вопросом времени. И никто не ожидал, что им станет юный Kotlin.

Kotlin создавался как язык для JVM. Некоторые считают, что он создавался специально для ОС Android, потому что всего через год после релиза языка Google официально внедрила Kotlin в разработку Android-приложений, а ещё через год объявила Kotlin [приоритетным языком разработки на ОС Android](https://vc.ru/dev/66728-google-obyavila-kotlin-prioritetnym-yazykom-programmirovaniya-dlya-razrabotki-android-prilozheniy).

[[Kotlin]] — обёртка вокруг языка [[Java]], которая позволяет писать код удобнее и быстрее. В результате компиляции код, написанный на [[Kotlin]], преобразуется в BYTE-код для JVM.

Kotlin действительно удобнее и во многом быстрее. Большую часть курса будем писать именно на нём. Но для более простого понимания всех преимуществ Kotlin, особенностей работы Android и успешного прохождения собеседований необходимо начать с [[Java]].

