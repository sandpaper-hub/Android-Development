В Kotlin все функции — **функции первого класса**. Они могут:

- Храниться в переменных и структурах данных.
- Передаваться в качестве аргументов.
- Возвращаться из других функций высшего порядка.

Можно работать с функциями любым способом, который возможен для других нефункциональных значений.

Kotlin как строго типизированный язык программирования использует семейство [[Функциональные типы|функциональных типов]] для представления функций и предоставляет набор специализированных языковых конструкций, таких как лямбда-выражение.

**Функция высшего порядка**, на английском top-level function, — это функция, которая принимает функции как параметры или возвращает функцию в качестве результата.

```kotlin
import kotlin.random.Random

fun main() {
    val catDownloader = CatDownloader()
    catDownloader.downloadCat(
        onSuccess = { cat -> println("Кот ${cat.name} загружен успешно") },
        onError = { error -> println(error) }
    )
}

class CatDownloader {

    // передаем в аргументы 2 функции onSuccess и onError
    fun downloadCat(
        onSuccess: (Cat) -> Unit,
        onError: (String) -> Unit
    ) {
        val cat: Cat? = getCatFromInternet()

        if (cat != null) {
            onSuccess.invoke(cat)
        } else {
            onError("Упс, что-то пошло не так при загрузке котеек.")
        }

    }

    private fun getCatFromInternet(): Cat? {
        return if (Random.nextBoolean()) Cat("Борис") else null
    }
}

class Cat(val name: String)
```

Аргумент состоит из трёх частей:

1. **имя функции** `onSuccess`. Это название параметра. Оно может быть любым, но, как и с любой переменной, хорошо бы давать осмысленное название. Как и в любой переменной в Kotlin, после двоеточия `:` нужно указать тип аргумента. В этом случае это функция, а как мы знаем, функция может что-то принимать и что-то возвращать.
2. **Аргументы функции** `()`. В круглых скобках можно перечислить через запятую список аргументов, которые должна принимать наша функция.
3. **Возвращаемый тип** `Unit`. После стрелочки `->` нужно указать тип, который возвращает функция. В случае с обычными функциями можно опускать `Unit`, если функция ничего не возвращает, но если мы хотим передать функцию в аргументы, то нужно явно указать возвращаемый тип `Unit`.

Вызвать функцию внутри функции можно двумя способами:
1. С помощью ключевого слова invoke
2. По имени функции

Передавать функции снаружи можно двумя способами:
1. В качестве лямбда выражения (как в примере)
2. Сохранить функцию в переменную, затем передать ее в качестве аргумента.

```kotlin
fun main() {
    val catDownloader = CatDownloader()
    // переменная объявляется по тому же принципу, что и передача функции в параметры другой функции.
    // сама функция объявляется в фигурных скобах { }
    val onSuccess: (Cat) -> Unit = { cat -> println("Кот ${cat.name} загружен успешно") }
    val onError: (String) -> Unit = { error -> println(error) }

    catDownloader.downloadCat(onSuccess = onSuccess, onError = onError)
}
```