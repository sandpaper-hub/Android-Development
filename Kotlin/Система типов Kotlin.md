---
tags:
  - any
  - class
  - Kotlin
  - тип_данных
  - Unit
  - Nothing
---
В Kotlin тип `Any` — супертип для всех типов, в том числе для примитивных, таких как `Int`:

```Kotlin
val integer: Any = 43 // значение 43 будет упаковано в тип Any
val string: Any = "Строчка из песни" // строка может быть упакована в тип Any
val boolean: Any = true // в Kotlin тип Boolean тоже ссылочный тип и может быть упакован в Any
val nullObj: Any = null // в этой строчке компилятор выдаст ошибку, потому что Any не может принимать значения null 
```

Тип `Any` не поддерживает значения `null`, поэтому мы не можем присвоить `null` переменной типа `Any`. Если мы хотим хранить nullable-переменные, то нам нужно использовать тип `Any?`:

```kotlin
val nullObj: Any? = null // теперь компилятор скомпилирует данный код без ошибок 
```

Класс `Any` очень похож на класс `Object` из Java. Если функция или переменная используют тип `Any`, то при компиляции в байт-коде этот тип будет скомпилирован в класс `Object`. Но всё же незначительные отличия от класса `Object` из Java у него есть.

Класс `Any`, в отличие от `Object` из Java, имеет всего три метода:

1. `equals(other: Any?): <ТИП>`
2. `hashCode(): Int`
3. `toString(): String`

Принцип их работы не отличается от Java-версий.

Остальные методы, такие как `wait()` или `notify()`, недоступны для класса `Any`, но их можно вызывать вручную, если привести значение к типу `java.lang.Object`:

```kotlin
val obj: Any = "Any"
// компилятор покажет предупреждение 'This class shouldn't be used in Kotlin. Use kotlin.Any instead.', 
// которое говорит, что использовать Object в Kotlin не рекомендуется
(obj as Object).notify()
(obj as Object).wait() 
```

Ключевое слово `as` говорит, что мы явно приводим к данному объекту. В Kotlin код `(obj as Object).notify()` эквивалентен `((Object) obj).notify()`.

### Тип `Unit`, или тип отсутствующего значения

В большинстве случаев разницы между ключевым словом `void` в Java и типом `Unit` можно и не заметить. Если ваша функция возвращает тип `Unit`, то компилятор скомпилирует её в старую добрую функцию `void`.

В отличие от `void` в Java, тип `Unit` — это полноценный тип, который может быть использован как аргумент типа.

Объект класса `Unit` — это своего рода Singleton, потому что в приложении существует только один экземпляр данного типа. Называется он тоже `Unit` и возвращается неявно.

Это может быть полезно при переопределении функции с обобщённым параметром, когда нужно заставить её возвращать значение типа `Unit`:\

```kotlin
internal interface Processor<T> {
    fun process(): T
}

class ProcessorWithoutResult : Processor<Unit> {

    // обратите внимание, что функция возвращает тип Unit, но в объявлении этого не указано
    // мы бы не смогли сделать так же в Java
    override fun process() {
        // не нужно писать ключевое слово return и возвращать какое-то значение
    }
} 
```

Сигнатура интерфейса требует, чтобы функция `process()` возвращала значение, а поскольку тип `Unit` не имеет значения, вернуть его из метода — не проблема.

Необязательно писать `return` в функции `ProcessorWithoutResult.process()`, потому что `return Unit` неявно добавляется компилятором.

### Тип `Nothing`, или функция, которая не завершается

`Nothing` — наследник всех классов в Kotlin, даже отмеченных модификатором `final`. Но создать его экземпляр не получится, потому что у него есть приватный конструктор:

```kotlin
// реализация класса Nothing в Kotlin
public final class Nothing private constructor() {} 
```

Тип `Nothing` не может содержать в себе какое-то значение, поэтому его можно использовать только в качестве типа возвращаемого значения функции или аргумента типа для обозначения типа возвращаемого значения обобщённой функции. Во всех остальных случаях объявление переменной типа `Nothing` не имеет смысла.

Такой тип описывает результат функции, которая никогда не вернёт управление. **Примером такой функции может быть:**

- Функция, которая выдаёт ошибку;
- Функция, в которой запущен бесконечный цикл.

Такие функции никогда не вернут результат. В приложениях — независимо от того, какой тип данных возвращает функция, — она может никогда не вернуть данные, потому что произошла ошибка или вычисления затянулись на неопределённый срок.

**В этом случае нужен `Nothing`.**

Вернуть управление из функции означает, что функция завершилась с каким-то результатом и вернула результат в вызывающую функцию. Результатом может быть любой объект, в том числе и `Unit`.

Хорошим примером такой функции может быть функция `TODO()` в Kotlin:

```kotlin
public fun TODO(): Nothing { /* compiled code */ } 
```

Эту функцию можно встретить в IDE при автогенерации кода.